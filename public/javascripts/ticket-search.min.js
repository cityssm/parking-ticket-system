(function(){function n(){var f=parseInt(u.value),e=parseInt(l.value);g.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading tickets...</p>';pts.postJSON("/tickets/doGetTickets",k,function(b){var c=b.tickets;if(0===c.length)g.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>';else{g.innerHTML=
'<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>'+pts.escapeHTML(q)+"</th><th>Issue Date</th><th>Plate Number</th><th>Location</th><th>Offence</th><th>Status</th></tr></thead><tbody></tbody></table>";for(var h=g.getElementsByTagName("tbody")[0],d=0;d<c.length;d+=1){var a=c[d],k=document.createElement("tr"),p=pts.getLicencePlateLocationProperties(a.licencePlateCountry,a.licencePlateProvince),r="";if(a.locationClassKey){var m=t[a.locationClassKey];m&&(r=m.locationClass)}m=
pts.getTicketStatus(a.latestStatus_statusKey);k.innerHTML='<td><a href="/tickets/'+a.ticketID+'" data-tooltip="View Parking Ticket">'+a.ticketNumber+"</a></td><td>"+a.issueDateString+"</td>"+('<td><div class="licence-plate is-fullwidth" style="--color:'+p.licencePlateProvince.color+";--backgroundColor:"+p.licencePlateProvince.backgroundColor+'">'+('<div class="licence-plate-province" data-tooltip="Province">'+p.licencePlateProvinceAlias+"</div>")+('<div class="licence-plate-number">'+pts.escapeHTML(a.licencePlateNumber)+
"</div>")+"</div></td>")+("<td>"+(a.locationDescription?pts.escapeHTML(a.locationDescription)+"<br />":"")+(a.locationKey&&""!==a.locationKey&&a.locationName?'<small class="has-tooltip-right" data-tooltip="'+pts.escapeHTML(r)+'"><i class="fas fa-map-marker-alt" aria-hidden="true"></i> '+a.locationName+"</small>":"")+"</td>")+"<td>"+pts.escapeHTML(a.parkingOffence)+"</td><td>"+(""===a.resolvedDateString?"Unresolved":'<span class="sr-only">Resolved</span><i class="fas fa-check" aria-hidden="true"></i> '+
a.resolvedDateString)+(a.latestStatus_statusKey?'<br /><span class="tag is-light is-primary">'+m.status+"</span>":"")+"</td>";h.appendChild(k)}g.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying parking tickets '+(e+1)+" to "+Math.min(f+e,b.count)+" of "+b.count+"</div></div>");f<b.count&&(c=document.createElement("nav"),c.className="level-right is-hidden-print",c.setAttribute("role","pagination"),c.setAttribute("aria-label",
"pagination"),0<e&&(h=document.createElement("a"),h.className="button",h.innerText="Previous",h.addEventListener("click",function(a){a.preventDefault();l.value=Math.max(0,e-f);n()}),c.appendChild(h)),f+e<b.count&&(b=document.createElement("a"),b.className="button has-margin-left-10",b.innerHTML='<span>Next Tickets</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',b.addEventListener("click",function(a){a.preventDefault();l.value=e+f;n()}),c.appendChild(b)),g.getElementsByClassName("level")[0].appendChild(c))}})}
function d(){l.value=0;n()}var t={},q="",k=document.getElementById("form--filters"),u=document.getElementById("filter--limit"),l=document.getElementById("filter--offset"),g=document.getElementById("container--searchResults");k.addEventListener("submit",function(d){d.preventDefault()});document.getElementById("filter--ticketNumber").addEventListener("change",d);document.getElementById("filter--licencePlateNumber").addEventListener("change",d);document.getElementById("filter--location").addEventListener("change",
d);document.getElementById("filter--isResolved").addEventListener("change",d);pts.getDefaultConfigProperty("ticketNumber_fieldLabel",function(f){q=f;pts.getDefaultConfigProperty("locationClasses",function(e){for(var b=0;b<e.length;b+=1){var c=e[b];t[c.locationClassKey]=c}d()})})})();
