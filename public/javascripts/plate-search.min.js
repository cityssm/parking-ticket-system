"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=document.querySelector("#form--filters"),t=document.querySelector("#filter--offset"),n=document.querySelector("#container--searchResults"),a=e=>{const t=document.createElement("tr"),n="/plates/"+(""===e.licencePlateCountry?"_":encodeURIComponent(e.licencePlateCountry))+"/"+(""===e.licencePlateProvince?"_":encodeURIComponent(e.licencePlateProvince))+"/"+(""===e.licencePlateNumber?"_":encodeURIComponent(e.licencePlateNumber));return t.innerHTML='<td><a href="'+n+'" data-tooltip="View Licence Plate">'+(""===e.licencePlateNumber?"(Blank)":'<span class="licence-plate-number">'+e.licencePlateNumber+"</span>")+'</a></td><td class="is-vcentered">'+(""===e.licencePlateProvince?'<span class="has-text-grey">(Blank)</span>':e.licencePlateProvince)+'</td><td class="is-vcentered">'+(""===e.licencePlateCountry?'<span class="has-text-grey">(Blank)</span>':e.licencePlateCountry)+'</td><td class="has-text-right is-vcentered">'+(e.hasOwnerRecord?'<span data-tooltip="Has Ownership Record"><i class="fas fa-check" aria-hidden="true"></i></span><span class="sr-only">Has Ownership Record</span>':"")+'</td><td class="has-text-right is-vcentered">'+e.unresolvedTicketCount.toString()+"</td>",t},s=e=>{const s=e.licencePlates;if(0===s.length)return void(n.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>');n.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>Licence Plate Number</th><th>Province</th><th>Country</th><th class="has-text-right">Ownership Record</th><th class="has-text-right">Unresolved Tickets</th></tr></thead><tbody></tbody></table>';const c=n.querySelector("tbody");for(const e of s){const t=a(e);c.append(t)}if(n.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying licence plates '+(e.offset+1).toString()+" to "+Math.min(e.limit+e.offset,e.count).toString()+" of "+e.count.toString()+"</div></div>"),e.limit<e.count){const a=document.createElement("nav");if(a.className="level-right is-hidden-print",a.setAttribute("role","pagination"),a.setAttribute("aria-label","pagination"),e.offset>0){const n=document.createElement("a");n.className="button",n.innerHTML='<span class="icon"><i class="fas fa-chevron-left" aria-hidden="true"></i></span><span>Previous</span>',n.addEventListener("click",n=>{n.preventDefault(),t.value=Math.max(0,e.offset-e.limit).toString(),i()}),a.append(n)}if(e.limit+e.offset<e.count){const n=document.createElement("a");n.className="button ml-3",n.innerHTML='<span>Next Licence Plates</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',n.addEventListener("click",n=>{n.preventDefault(),t.value=(e.offset+e.limit).toString(),i()}),a.append(n)}n.querySelector(".level").append(a)}},i=()=>{n.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading licence plates...</p>',cityssm.postJSON("/plates/doGetLicencePlates",e,s)},c=()=>{t.value="0",i()};e.addEventListener("submit",e=>{e.preventDefault()}),document.querySelector("#filter--licencePlateNumber").addEventListener("change",c),document.querySelector("#filter--hasOwnerRecord").addEventListener("change",c),document.querySelector("#filter--hasUnresolvedTickets").addEventListener("change",c),pts.loadDefaultConfigProperties(c)})();