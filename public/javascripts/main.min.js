window.pts={};pts.clearElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};pts.escapeHTML=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};pts.responseToJSON=function(a){return a.json()};
pts.postJSON=function(a,b,g){var d={method:"POST",credentials:"include"};b&&(b.tagName&&"FORM"===b.tagName?d.body=new URLSearchParams(new FormData(b)):b.constructor===Object&&(d.headers={"Content-Type":"application/json"},d.body=JSON.stringify(b)));window.fetch(a,d).then(pts.responseToJSON).then(g)};
(function(){var a={},b=!1,g=function(){try{var c=window.localStorage.getItem("defaultConfigProperties");if(c)return a=JSON.parse(c),b=!0}catch(f){}return!1};pts.loadDefaultConfigProperties=function(c){b?c():g()?c():pts.postJSON("/dashboard/doGetDefaultConfigProperties",{},function(f){a=f;b=!0;try{window.localStorage.setItem("defaultConfigProperties",JSON.stringify(a))}catch(h){}c()})};pts.getDefaultConfigProperty=function(c,f){b?f(a[c]):g()?f(a[c]):pts.loadDefaultConfigProperties(function(){f(a[c])})};
pts.getLicencePlateCountryProperties=function(c){if(!b)return{};c=a.licencePlateCountryAliases[c.toUpperCase()]||c;return a.licencePlateProvinces.hasOwnProperty(c)?a.licencePlateProvinces[c]:{}};pts.getLicencePlateLocationProperties=function(c,f){var h={provinceShortName:f,color:"#000",backgroundColor:"#fff"};if(!b)return{licencePlateCountryAlias:c,licencePlateProvinceAlias:f,licencePlateProvince:h};var k=a.licencePlateCountryAliases[c.toUpperCase()]||c,d=f;a.licencePlateProvinceAliases.hasOwnProperty(k)&&
(d=a.licencePlateProvinceAliases[k][f.toUpperCase()]||f);var e=h;a.licencePlateProvinces.hasOwnProperty(k)&&(e=a.licencePlateProvinces[k].provinces[d]||h);return{licencePlateCountryAlias:k,licencePlateProvinceAlias:d,licencePlateProvince:e}};var d={},e=!1;pts.getTicketStatus=function(c){var f={statusKey:c,status:c};if(!b)return f;if(!e){for(var h=0;h<a.parkingTicketStatuses.length;h+=1){var k=a.parkingTicketStatuses[h];d[k.statusKey]=k}e=!0}return d[c]||f}})();pts.showModal=function(a){a.classList.add("is-active")};
pts.hideModal=function(a){a=a.currentTarget||a;(a.classList.contains("modal")?a:a.closest(".modal")).classList.remove("is-active")};
pts.openHtmlModal=function(a,b){window.fetch("/html/"+a+".html").then(function(a){return a.text()}).then(function(a){var d=document.createElement("div");d.innerHTML=a;var e=d.getElementsByClassName("modal")[0];document.body.insertAdjacentElement("beforeend",d);if(b&&b.onshow)b.onshow(e);e.classList.add("is-active");a=function(){var a=e.classList.contains("is-active");if(!(b&&b.onhide&&a&&b.onhide(e))){e.classList.remove("is-active");if(b&&b.onhidden&&a)b.onhidden(e);d.remove();if(b&&b.onremoved)b.onremoved()}};
if(b&&b.onshown)b.onshown(e,a);for(var c=e.getElementsByClassName("is-close-modal-button"),f=0;f<c.length;f+=1)c[f].addEventListener("click",a)})};
(function(){function a(a){var b=document.createElement("div");b.className="modal is-active";var c=a.contextualColorName||"info",f=a.titleString||"",d=a.bodyHTML||"",e=a.cancelButtomHTML||"Cancel";b.innerHTML='<div class="modal-background"></div><div class="modal-content"><div class="message is-'+c+'"><header class="message-header"><span></span></header>'+('<section class="message-body">'+(""===d?"":'<div class="has-margin-bottom-10">'+d+"</div>")+('<div class="buttons justify-flex-end">'+(a.hideCancelButton?
"":'<button class="button is-cancel-button" type="button" aria-label="Cancel">'+e+"</button>")+('<button class="button is-ok-button is-'+c+'" type="button" aria-label="OK">'+(a.okButtonHTML||"OK")+"</button>")+"</div>")+"</section>")+"</div></div>";b.getElementsByClassName("message-header")[0].getElementsByTagName("span")[0].innerText=f;a.hideCancelButton||b.getElementsByClassName("is-cancel-button")[0].addEventListener("click",function(){b.remove()});c=b.getElementsByClassName("is-ok-button")[0];
c.addEventListener("click",function(){b.remove();a.callbackFn&&a.callbackFn()});document.body.insertAdjacentElement("beforeend",b);c.focus()}function b(a){return a.returnValue="You have unsaved changes that may be lost."}function g(a){a.preventDefault();pts.confirmModal("Log Out?","<p>Are you sure you want to log out?</p>",'<span class="icon"><i class="fas fa-sign-out-alt" aria-hidden="true"></i></span><span>Log Out</span>',"warning",function(){window.localStorage.clear();window.location.href="/logout"})}
pts.confirmModal=function(b,c,d,e,g){a({contextualColorName:e,titleString:b,bodyHTML:c,okButtonHTML:d,callbackFn:g})};pts.alertModal=function(b,c,d,e){a({contextualColorName:e,titleString:b,bodyHTML:c,hideCancelButton:!0,okButtonHTML:d})};var d=!1;pts.enableNavBlocker=function(){d||(window.addEventListener("beforeunload",b),d=!0)};pts.disableNavBlocker=function(){d&&(window.removeEventListener("beforeunload",b),d=!1)};document.getElementById("navbar-burger--main").addEventListener("click",function(a){a.currentTarget.classList.toggle("is-active");
document.getElementById("navbar-menu--main").classList.toggle("is-active")});for(var e=document.getElementsByClassName("is-logout-button"),c=0;c<e.length;c+=1)e[c].addEventListener("click",g)})();
