"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){const e={};let t="";const i=document.getElementById("form--filters"),a=document.getElementById("filter--limit"),n=document.getElementById("filter--offset"),s=document.getElementById("container--searchResults");function c(){const l=parseInt(a.value,10),o=parseInt(n.value,10);cityssm.clearElement(s),s.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading tickets...</p>',cityssm.postJSON("/tickets/doGetTickets",i,function(i){const a=i.tickets;if(0===a.length)return void(s.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>');s.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>'+cityssm.escapeHTML(t)+"</th><th>Issue Date</th><th>Plate Number</th><th>Location</th><th>Offence</th><th>Status</th></tr></thead><tbody></tbody></table>";const r=s.getElementsByTagName("tbody")[0];for(const t of a){const i=document.createElement("tr"),a=pts.getLicencePlateLocationProperties(t.licencePlateCountry,t.licencePlateProvince);let n="";if(t.locationClassKey){const i=e[t.locationClassKey];i&&(n=i.locationClass)}const s=pts.getTicketStatus(t.latestStatus_statusKey);i.innerHTML='<td><a href="/tickets/'+t.ticketID+'" data-tooltip="View Parking Ticket">'+t.ticketNumber+'</a></td><td class="is-nowrap">'+t.issueDateString+'</td><td><div class="licence-plate is-fullwidth" style="--color:'+a.licencePlateProvince.color+";--backgroundColor:"+a.licencePlateProvince.backgroundColor+'"><div class="licence-plate-province">'+a.licencePlateProvinceAlias+'</div><div class="licence-plate-number">'+(""===t.licencePlateNumber?'<i class="fas fa-question-circle has-opacity-2" aria-hidden="true"></i>':cityssm.escapeHTML(t.licencePlateNumber))+"</div></div></td><td>"+(t.locationDescription?cityssm.escapeHTML(t.locationDescription)+"<br />":"")+(t.locationKey&&""!==t.locationKey&&t.locationName?'<small class="has-tooltip-right" data-tooltip="'+cityssm.escapeHTML(n)+'"><i class="fas fa-map-marker-alt" aria-hidden="true"></i> '+t.locationName+"</small>":"")+"</td><td>"+cityssm.escapeHTML(t.parkingOffence)+"</td><td>"+(""===t.resolvedDateString?"Unresolved":'<span class="sr-only">Resolved</span><i class="fas fa-check" aria-hidden="true"></i> '+t.resolvedDateString)+(t.latestStatus_statusKey?'<br /><span class="tag is-light is-primary">'+s.status+"</span>":"")+"</td>",r.appendChild(i)}if(s.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying parking tickets '+(o+1)+" to "+Math.min(l+o,i.count)+" of "+i.count+"</div></div>"),l<i.count){const e=document.createElement("nav");if(e.className="level-right is-hidden-print",e.setAttribute("role","pagination"),e.setAttribute("aria-label","pagination"),o>0){const t=document.createElement("a");t.className="button",t.innerText="Previous",t.addEventListener("click",function(e){e.preventDefault(),n.value=Math.max(0,o-l).toString(),s.scrollIntoView(!0),c()}),e.appendChild(t)}if(l+o<i.count){const t=document.createElement("a");t.className="button ml-3",t.innerHTML='<span>Next Tickets</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',t.addEventListener("click",function(e){e.preventDefault(),n.value=(o+l).toString(),s.scrollIntoView(!0),c()}),e.appendChild(t)}s.getElementsByClassName("level")[0].appendChild(e)}})}function l(){n.value="0",c()}i.addEventListener("submit",function(e){e.preventDefault()}),document.getElementById("filter--ticketNumber").addEventListener("change",l),document.getElementById("filter--licencePlateNumber").addEventListener("change",l),document.getElementById("filter--location").addEventListener("change",l),document.getElementById("filter--isResolved").addEventListener("change",l),pts.getDefaultConfigProperty("ticketNumber_fieldLabel",function(i){t=i,pts.getDefaultConfigProperty("locationClasses",function(t){for(const i of t)e[i.locationClassKey]=i;c()})})}();