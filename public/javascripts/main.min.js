window.pts={};pts.clearElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};pts.escapeHTML=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};pts.responseToJSON=function(a){return a.json()};
pts.postJSON=function(a,b,h){var e={method:"POST",credentials:"include"};b&&(b.tagName&&"FORM"===b.tagName?e.body=new URLSearchParams(new FormData(b)):b.constructor===Object&&(e.headers={"Content-Type":"application/json"},e.body=JSON.stringify(b)));window.fetch(a,e).then(pts.responseToJSON).then(h)};
(function(){var a={},b=!1,h=function(){try{var d=window.localStorage.getItem("defaultConfigProperties");if(d)return a=JSON.parse(d),b=!0}catch(c){}return!1};pts.loadDefaultConfigProperties=function(d){b?d():h()?d():pts.postJSON("/dashboard/doGetDefaultConfigProperties",{},function(c){a=c;b=!0;try{window.localStorage.setItem("defaultConfigProperties",JSON.stringify(a))}catch(g){}d()})};pts.getDefaultConfigProperty=function(d,c){b?c(a[d]):h()?c(a[d]):pts.loadDefaultConfigProperties(function(){c(a[d])})};
pts.getLicencePlateCountryProperties=function(d){if(!b)return{};d=a.licencePlateCountryAliases[d.toUpperCase()]||d;return a.licencePlateProvinces.hasOwnProperty(d)?a.licencePlateProvinces[d]:{}};pts.getLicencePlateLocationProperties=function(d,c){var g={provinceShortName:c,color:"#000",backgroundColor:"#fff"};if(!b)return{licencePlateCountryAlias:d,licencePlateProvinceAlias:c,licencePlateProvince:g};var k=a.licencePlateCountryAliases[d.toUpperCase()]||d,e=c;a.licencePlateProvinceAliases.hasOwnProperty(k)&&
(e=a.licencePlateProvinceAliases[k][c.toUpperCase()]||c);var f=g;a.licencePlateProvinces.hasOwnProperty(k)&&(f=a.licencePlateProvinces[k].provinces[e]||g);return{licencePlateCountryAlias:k,licencePlateProvinceAlias:e,licencePlateProvince:f}};var e={},f=!1;pts.getTicketStatus=function(d){var c={statusKey:d,status:d};if(!b)return c;if(!f){for(var g=0;g<a.parkingTicketStatuses.length;g+=1){var k=a.parkingTicketStatuses[g];e[k.statusKey]=k}f=!0}return e[d]||c}})();
pts.initializeTabs=function(a,b){function h(a){a.preventDefault();var c=a.currentTarget;a=document.getElementById(c.getAttribute("href").substring(1));for(var g=0;g<f.length;g+=1)f[g].classList.remove("is-active"),d[g].setAttribute("aria-selected","false");(e?c:c.parentNode).classList.add("is-active");c.setAttribute("aria-selected","true");c=a.parentNode.getElementsByClassName("tab-content");for(g=0;g<c.length;g+=1)c[g].classList.remove("is-active");a.classList.add("is-active");if(b&&b.onshown)b.onshown(a)}
if(a)for(var e=a.classList.contains("panel-tabs")||a.classList.contains("menu-list"),f=a.getElementsByTagName(e?"a":"li"),d=e?f:a.getElementsByTagName("a"),c=0;c<f.length;c+=1)(e?f[c]:f[c].getElementsByTagName("a")[0]).addEventListener("click",h)};pts.showModal=function(a){a.classList.add("is-active")};pts.hideModal=function(a){a=a.currentTarget||a;(a.classList.contains("modal")?a:a.closest(".modal")).classList.remove("is-active")};
pts.openHtmlModal=function(a,b){window.fetch("/html/"+a+".html").then(function(a){return a.text()}).then(function(a){var e=document.createElement("div");e.innerHTML=a;var f=e.getElementsByClassName("modal")[0];document.body.insertAdjacentElement("beforeend",e);if(b&&b.onshow)b.onshow(f);f.classList.add("is-active");a=function(){var a=f.classList.contains("is-active");if(!(b&&b.onhide&&a&&b.onhide(f))){f.classList.remove("is-active");if(b&&b.onhidden&&a)b.onhidden(f);e.remove();if(b&&b.onremoved)b.onremoved()}};
if(b&&b.onshown)b.onshown(f,a);for(var d=f.getElementsByClassName("is-close-modal-button"),c=0;c<d.length;c+=1)d[c].addEventListener("click",a)})};
(function(){function a(a){var c=document.createElement("div");c.className="modal is-active";var b=a.contextualColorName||"info",d=a.titleString||"",e=a.bodyHTML||"",f=a.cancelButtomHTML||"Cancel";c.innerHTML='<div class="modal-background"></div><div class="modal-content"><div class="message is-'+b+'"><header class="message-header"><span class="is-size-5"></span></header>'+('<section class="message-body">'+(""===e?"":'<div class="has-margin-bottom-10">'+e+"</div>")+('<div class="buttons justify-flex-end">'+
(a.hideCancelButton?"":'<button class="button is-cancel-button" type="button" aria-label="Cancel">'+f+"</button>")+('<button class="button is-ok-button is-'+b+'" type="button" aria-label="OK">'+(a.okButtonHTML||"OK")+"</button>")+"</div>")+"</section>")+"</div></div>";c.getElementsByClassName("message-header")[0].getElementsByTagName("span")[0].innerText=d;a.hideCancelButton||c.getElementsByClassName("is-cancel-button")[0].addEventListener("click",function(){c.remove()});b=c.getElementsByClassName("is-ok-button")[0];
b.addEventListener("click",function(){c.remove();a.callbackFn&&a.callbackFn()});document.body.insertAdjacentElement("beforeend",c);b.focus()}function b(a){return a.returnValue="You have unsaved changes that may be lost."}function h(a){a.preventDefault();pts.confirmModal("Log Out?","<p>Are you sure you want to log out?</p>",'<span class="icon"><i class="fas fa-sign-out-alt" aria-hidden="true"></i></span><span>Log Out</span>',"warning",function(){window.localStorage.clear();window.location.href="/logout"})}
pts.confirmModal=function(c,b,d,e,f){a({contextualColorName:e,titleString:c,bodyHTML:b,okButtonHTML:d,callbackFn:f})};pts.alertModal=function(c,b,d,e){a({contextualColorName:e,titleString:c,bodyHTML:b,hideCancelButton:!0,okButtonHTML:d})};var e=!1;pts.enableNavBlocker=function(){e||(window.addEventListener("beforeunload",b),e=!0)};pts.disableNavBlocker=function(){e&&(window.removeEventListener("beforeunload",b),e=!1)};document.getElementById("navbar-burger--main").addEventListener("click",function(a){a.currentTarget.classList.toggle("is-active");
document.getElementById("navbar-menu--main").classList.toggle("is-active")});for(var f=document.getElementsByClassName("is-logout-button"),d=0;d<f.length;d+=1)f[d].addEventListener("click",h)})();
