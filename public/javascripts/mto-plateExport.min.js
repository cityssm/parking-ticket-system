(function(){function b(a){document.getElementById("batchSelector--batch").innerHTML="<strong>Batch #"+a.batchID+"</strong>, Created "+a.batchDateString}function c(a){a.preventDefault();var b,f,c=function(d){d.preventDefault();parseInt(d.currentTarget.getAttribute("data-batch-id"));b()},h=function(){pts.postJSON("/plates/doGetUnsentLicencePlateLookupBatches",{},function(d){if(0===d.length)f.innerHTML='<div class="message is-info"><p class="message-body">There are no unsent batches available.</p></div>';
else{var a=document.createElement("div");a.className="list is-hoverable";for(var b=0;b<d.length;b+=1){var g=d[b],e=document.createElement("a");e.className="list-item";e.setAttribute("href","#");e.setAttribute("data-batch-id",g.batchID);e.innerHTML='<div class="columns"><div class="column is-narrow">#'+g.batchID+'</div><div class="column has-text-right">'+g.batchDateString+(g.lockDate?'<br /><span class="tag">Locked</span>':"")+"</div></div>";e.addEventListener("click",c);a.appendChild(e)}pts.clearElement(f);
f.appendChild(a)}})};pts.openHtmlModal("mto-selectBatch",{onshow:function(a){f=a.getElementsByClassName("is-results-container")[0];h()},onshown:function(a,c){b=c}})}document.getElementById("is-select-batch-button").addEventListener("click",c);document.getElementById("batchSelector--batch").addEventListener("dblclick",c);document.getElementById("is-create-batch-button").addEventListener("click",function(){pts.confirmModal("Create a New Batch?","Are you sure you want to create a new licence plate lookup batch?",
"Yes, Create a Batch","info",function(){pts.postJSON("/plates/doCreateLookupBatch",{},function(a){a.success&&b(a.batch)})})});pts.plateExportBatch&&(b(pts.plateExportBatch),delete pts.plateExportBatch)})();
