"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e={},t="",a=document.getElementById("form--filters"),i=document.getElementById("filter--limit"),n=document.getElementById("filter--offset"),s=document.getElementById("container--searchResults");function l(){var c=parseInt(i.value,10),r=parseInt(n.value,10);cityssm.clearElement(s),s.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading tickets...</p>',cityssm.postJSON("/tickets/doGetTickets",a,function(a){var i=a.tickets;if(0!==i.length){s.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>'+cityssm.escapeHTML(t)+"</th><th>Issue Date</th><th>Plate Number</th><th>Location</th><th>Offence</th><th>Status</th></tr></thead><tbody></tbody></table>";for(var o=s.getElementsByTagName("tbody")[0],d=0;d<i.length;d+=1){var u=i[d],m=document.createElement("tr"),p=pts.getLicencePlateLocationProperties(u.licencePlateCountry,u.licencePlateProvince),v="";if(u.locationClassKey){var f=e[u.locationClassKey];f&&(v=f.locationClass)}var h=pts.getTicketStatus(u.latestStatus_statusKey);m.innerHTML='<td><a href="/tickets/'+u.ticketID+'" data-tooltip="View Parking Ticket">'+u.ticketNumber+'</a></td><td class="is-nowrap">'+u.issueDateString+'</td><td><div class="licence-plate is-fullwidth" style="--color:'+p.licencePlateProvince.color+";--backgroundColor:"+p.licencePlateProvince.backgroundColor+'"><div class="licence-plate-province">'+p.licencePlateProvinceAlias+'</div><div class="licence-plate-number">'+(""===u.licencePlateNumber?'<i class="fas fa-question-circle has-opacity-2" aria-hidden="true"></i>':cityssm.escapeHTML(u.licencePlateNumber))+"</div></div></td><td>"+(u.locationDescription?cityssm.escapeHTML(u.locationDescription)+"<br />":"")+(u.locationKey&&""!==u.locationKey&&u.locationName?'<small class="has-tooltip-right" data-tooltip="'+cityssm.escapeHTML(v)+'"><i class="fas fa-map-marker-alt" aria-hidden="true"></i> '+u.locationName+"</small>":"")+"</td><td>"+cityssm.escapeHTML(u.parkingOffence)+"</td><td>"+(""===u.resolvedDateString?"Unresolved":'<span class="sr-only">Resolved</span><i class="fas fa-check" aria-hidden="true"></i> '+u.resolvedDateString)+(u.latestStatus_statusKey?'<br /><span class="tag is-light is-primary">'+h.status+"</span>":"")+"</td>",o.appendChild(m)}if(s.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying parking tickets '+(r+1)+" to "+Math.min(c+r,a.count)+" of "+a.count+"</div></div>"),c<a.count){var g=document.createElement("nav");if(g.className="level-right is-hidden-print",g.setAttribute("role","pagination"),g.setAttribute("aria-label","pagination"),r>0){var y=document.createElement("a");y.className="button",y.innerText="Previous",y.addEventListener("click",function(e){e.preventDefault(),n.value=Math.max(0,r-c).toString(),s.scrollIntoView(!0),l()}),g.appendChild(y)}if(c+r<a.count){var b=document.createElement("a");b.className="button ml-3",b.innerHTML='<span>Next Tickets</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',b.addEventListener("click",function(e){e.preventDefault(),n.value=(r+c).toString(),s.scrollIntoView(!0),l()}),g.appendChild(b)}s.getElementsByClassName("level")[0].appendChild(g)}}else s.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>'})}function c(){n.value="0",l()}a.addEventListener("submit",function(e){e.preventDefault()}),document.getElementById("filter--ticketNumber").addEventListener("change",c),document.getElementById("filter--licencePlateNumber").addEventListener("change",c),document.getElementById("filter--location").addEventListener("change",c),document.getElementById("filter--isResolved").addEventListener("change",c),pts.getDefaultConfigProperty("ticketNumber_fieldLabel",function(a){t=a,pts.getDefaultConfigProperty("locationClasses",function(t){for(var a=0;a<t.length;a+=1){var i=t[a];e[i.locationClassKey]=i}l()})})}();