var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,c={next:function(){if(b<a.length){var f=b++;return{value:e(f,a[f]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill=function(a,e,b,c){if(e){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var f=a[c];f in b||(b[f]={});b=b[f]}a=a[a.length-1];c=b[a];e=e(c);e!=c&&null!=e&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es6","es3");
(function(){for(var a=""===document.getElementById("ticket--ticketID").value,e=document.getElementById("container--form-message"),b=function(a){pts.enableNavBlocker();e.innerHTML='<span class="tag is-light is-info is-medium"><span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span> <span>Unsaved Changes</span></div>'},c=document.querySelectorAll(".input, .select, .textarea"),f=0;f<c.length;f+=1)c[f].addEventListener("change",b);document.getElementById("form--ticket").addEventListener("submit",
function(d){d.preventDefault();var h=document.getElementById("ticket--ticketNumber").value;e.innerHTML='<span class="tag is-light is-info is-medium"><span>Saving ticket... </span> <span class="icon"><i class="fas fa-circle-notch fa-spin" aria-hidden="true"></i></span></div>';pts.postJSON(a?"/tickets/doCreateTicket":"/tickets/doUpdateTicket",d.currentTarget,function(d){d.success?(pts.disableNavBlocker(),e.innerHTML='<span class="tag is-light is-success is-medium"><span class="icon"><i class="fas fa-check" aria-hidden="true"></i></span> <span>Saved Successfully</span></div>'):
(b(),pts.alertModal("Ticket Not Saved",d.message,"OK","danger"));d.success&&a&&pts.openHtmlModal("ticket-createSuccess",{onshow:function(){document.getElementById("createSuccess--ticketNumber").innerText=h;document.getElementById("createSuccess--editTicketButton").setAttribute("href","/tickets/"+d.ticketID+"/edit");document.getElementById("createSuccess--newTicketButton").setAttribute("href","/tickets/new/"+d.nextTicketNumber)}})})});pts.getDefaultConfigProperty("locationClasses",function(a){for(var d,
c={},b={},e=0;e<a.length;e+=1){var f=a[e];c[f.locationClassKey]=f}var g=function(a){a.preventDefault();a=b[parseInt(a.currentTarget.getAttribute("data-index"))];document.getElementById("ticket--locationKey").value=a.locationKey;document.getElementById("ticket--locationName").value=a.locationName;d();b=[]},k=function(){pts.postJSON("/offences/doGetAllLocations",{},function(a){b=a;a=document.createElement("div");a.className="list is-hoverable";for(var d=0;d<b.length;d+=1){var h=b[d],e=c[h.locationClassKey],
f=document.createElement("a");f.className="list-item";f.setAttribute("data-index",d);f.setAttribute("href","#");f.addEventListener("click",g);f.innerHTML='<div class="level"><div class="level-left">'+pts.escapeHTML(h.locationName)+"</div>"+(e?'<div class="level-right"><span class="tag is-primary">'+pts.escapeHTML(e.locationClass)+"</span></div>":"")+"</div>";a.insertAdjacentElement("beforeend",f)}d=document.getElementById("container--parkingLocations");pts.clearElement(d);d.insertAdjacentElement("beforeend",
a)})};a=function(a){a.preventDefault();pts.openHtmlModal("ticket-setLocation",{onshown:function(a,h){d=h;k()},onremoved:function(){document.getElementById("is-location-lookup-button").focus()}})};document.getElementById("is-location-lookup-button").addEventListener("click",a);document.getElementById("ticket--locationName").addEventListener("dblclick",a)});var l,g=[],m=function(a){a.preventDefault();a=g[parseInt(a.currentTarget.getAttribute("data-index"))];document.getElementById("ticket--bylawNumber").value=
a.bylawNumber;var d=document.getElementById("ticket--offenceAmount");d.classList.add("is-readonly");d.setAttribute("readonly","readonly");d.closest(".field").getElementsByClassName("is-unlock-field-button")[0].removeAttribute("disabled");d.value=a.offenceAmount;document.getElementById("ticket--parkingOffence").value=a.bylawDescription;l();g=[]},n=function(){var a=document.getElementById("ticket--locationKey").value;document.getElementById("ticket--locationName");pts.postJSON("/offences/doGetOffencesByLocation",
{locationKey:a},function(a){g=a;a=document.createElement("div");a.className="list is-hoverable has-margin-bottom-20";for(var d=0;d<g.length;d+=1){var c=g[d],b=document.createElement("a");b.className="list-item";b.setAttribute("data-index",d);b.setAttribute("href","#");b.addEventListener("click",m);b.innerHTML='<div class="columns">'+('<div class="column">'+pts.escapeHTML(c.bylawNumber)+"<br /><small>"+pts.escapeHTML(c.bylawDescription)+"</small></div>")+('<div class="column is-narrow">$ '+c.offenceAmount.toFixed(2)+
"</div>")+"</div>";a.insertAdjacentElement("beforeend",b)}d=document.getElementById("container--bylawNumbers");pts.clearElement(d);d.appendChild(a)})},c=function(a){a.preventDefault();pts.openHtmlModal("ticket-setBylawOffence",{onshown:function(a,d){l=d;n();document.getElementById("bylawLookup--searchStr").focus()},onremoved:function(){document.getElementById("is-bylaw-lookup-button").focus()}})};document.getElementById("is-bylaw-lookup-button").addEventListener("click",c);document.getElementById("ticket--bylawNumber").addEventListener("dblclick",
c);c=function(){var a=document.getElementById("datalist--licencePlateProvince");pts.clearElement(a);var b=pts.getLicencePlateCountryProperties(document.getElementById("ticket--licencePlateCountry").value);if(b&&b.provinces)for(var b=Object.values(b.provinces),c=0;c<b.length;c+=1){var e=document.createElement("option");e.setAttribute("value",b[c].provinceShortName);a.appendChild(e)}};document.getElementById("ticket--licencePlateCountry").addEventListener("change",c);pts.loadDefaultConfigProperties(c);
for(var c=function(a){a.preventDefault();a=a.currentTarget;var b=a.getAttribute("data-unlock"),b=a.closest(".field").getElementsByTagName(b)[0];b.removeAttribute("readonly");b.classList.remove("is-readonly");b.focus();a.setAttribute("disabled","disabled")},f=document.getElementsByClassName("is-unlock-field-button"),k=0;k<f.length;k+=1)f[k].addEventListener("click",c)})();
