"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){let e="";const t=document.getElementById("locationFilter--locationClassKey"),o=document.getElementById("locationFilter--locationName"),n=document.getElementById("locationResults"),a=new Map;let s=exports.locations;function i(t){t.preventDefault();const o=parseInt(t.currentTarget.getAttribute("data-index"),10),n=s[o];let i;const l=function(){cityssm.postJSON("/admin/doDeleteLocation",{locationKey:n.locationKey},function(e){e.success&&(i(),s=e.locations,c())})},d=function(e){e.preventDefault(),cityssm.confirmModal("Delete Location",'Are you sure you want to remove "'+n.locationName+'" from the list of available options?',"Yes, Remove Location","danger",l)},r=function(e){e.preventDefault(),cityssm.postJSON("/admin/doUpdateLocation",e.currentTarget,function(e){e.success&&(i(),s=e.locations,c())})};cityssm.openHtmlModal("location-edit",{onshow:function(){document.getElementById("editLocation--locationKey").value=n.locationKey;const t=document.getElementById("editLocation--locationClassKey");t.innerHTML=e,a.has(n.locationClassKey)||t.insertAdjacentHTML("beforeend",'<option value="'+cityssm.escapeHTML(n.locationClassKey)+'">'+cityssm.escapeHTML(n.locationClassKey)+"</option>"),t.value=n.locationClassKey,document.getElementById("editLocation--locationName").value=n.locationName},onshown:function(e,t){i=t,document.getElementById("form--editLocation").addEventListener("submit",r),e.getElementsByClassName("is-delete-button")[0].addEventListener("click",d)}})}function c(){let e=0;const c=t.value,l=o.value.trim().toLowerCase().split(" "),d=document.createElement("tbody");for(let t=0;t<s.length;t+=1){const o=s[t];if(""!==c&&c!==o.locationClassKey)continue;let n=!0;const r=o.locationName.toLowerCase();for(let e=0;e<l.length;e+=1)if(-1===r.indexOf(l[e])){n=!1;break}if(!n)continue;e+=1;const m=a.has(o.locationClassKey)?a.get(o.locationClassKey).locationClass:o.locationClassKey,u=document.createElement("tr");u.innerHTML='<td><a data-index="'+t+'" href="#">'+cityssm.escapeHTML(o.locationName)+"</a></td><td>"+cityssm.escapeHTML(m)+"</td>",u.getElementsByTagName("a")[0].addEventListener("click",i),d.appendChild(u)}cityssm.clearElement(n),0!==e?(n.innerHTML='<table class="table is-fixed is-striped is-hoverable is-fullwidth"><thead><tr><th>Location</th><th>Class</th></tr></thead></table>',n.getElementsByTagName("table")[0].appendChild(d)):n.innerHTML='<div class="message is-info"><div class="message-body">There are no locations that meet your search criteria.</div></div>'}delete exports.locations,t.addEventListener("change",c),o.addEventListener("keyup",c),pts.getDefaultConfigProperty("locationClasses",function(o){t.innerHTML='<option value="">(All Location Classes)</option>';for(let t=0;t<o.length;t+=1){const n=o[t];e+='<option value="'+n.locationClassKey+'">'+cityssm.escapeHTML(n.locationClass)+"</option>",a.set(n.locationClassKey,n)}t.insertAdjacentHTML("beforeend",e),c()}),document.getElementById("is-add-location-button").addEventListener("click",function(t){let o;t.preventDefault();const n=function(e){e.preventDefault(),cityssm.postJSON("/admin/doAddLocation",e.currentTarget,function(e){e.success?(o(),s=e.locations,c()):cityssm.alertModal("Location Not Added",e.message,"OK","danger")})};cityssm.openHtmlModal("location-add",{onshown:function(t,a){o=a,document.getElementById("addLocation--locationClassKey").insertAdjacentHTML("beforeend",e),document.getElementById("form--addLocation").addEventListener("submit",n)}})})}();