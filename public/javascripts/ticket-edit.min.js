var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,c={next:function(){if(d<a.length){var g=d++;return{value:e(g,a[g]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill=function(a,e,d,c){if(e){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var g=a[c];g in d||(d[g]={});d=d[g]}a=a[a.length-1];c=d[a];e=e(c);e!=c&&null!=e&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return d})}},"es6","es3");
(function(){for(var a=""===document.getElementById("ticket--ticketID").value,e=document.getElementById("container--form-message"),d=function(a){pts.enableNavBlocker();e.innerHTML='<span class="tag is-light is-info is-medium"><span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span> <span>Unsaved Changes</span></div>'},c=document.querySelectorAll(".input, .select, .textarea"),g=0;g<c.length;g+=1)c[g].addEventListener("change",d);document.getElementById("form--ticket").addEventListener("submit",
function(f){f.preventDefault();var b=document.getElementById("ticket--ticketNumber").value;e.innerHTML='<span class="tag is-light is-info is-medium"><span>Saving ticket... </span> <span class="icon"><i class="fas fa-circle-notch fa-spin" aria-hidden="true"></i></span></div>';pts.postJSON(a?"/tickets/doCreateTicket":"/tickets/doUpdateTicket",f.currentTarget,function(f){f.success?(pts.disableNavBlocker(),e.innerHTML='<span class="tag is-light is-success is-medium"><span class="icon"><i class="fas fa-check" aria-hidden="true"></i></span> <span>Saved Successfully</span></div>'):
(d(),pts.alertModal("Ticket Not Saved",f.message,"OK","danger"));f.success&&a&&pts.openHtmlModal("ticket-createSuccess",{onshow:function(){document.getElementById("createSuccess--ticketNumber").innerText=b;document.getElementById("createSuccess--editTicketButton").setAttribute("href","/tickets/"+f.ticketID+"/edit");document.getElementById("createSuccess--newTicketButton").setAttribute("href","/tickets/new/"+f.nextTicketNumber)}})})});pts.getDefaultConfigProperty("locationClasses",function(a){for(var b,
f={},c={},d=0;d<a.length;d+=1){var e=a[d];f[e.locationClassKey]=e}var g=function(a){a.preventDefault();a=c[parseInt(a.currentTarget.getAttribute("data-index"))];document.getElementById("ticket--locationKey").value=a.locationKey;document.getElementById("ticket--locationName").value=a.locationName;b();c=[]},h=function(){pts.postJSON("/offences/doGetAllLocations",{},function(a){c=a;a=document.createElement("div");a.className="list is-hoverable";for(var b=0;b<c.length;b+=1){var d=c[b],e=f[d.locationClassKey],
k=document.createElement("a");k.className="list-item";k.setAttribute("data-index",b);k.setAttribute("href","#");k.addEventListener("click",g);k.innerHTML='<div class="level"><div class="level-left">'+pts.escapeHTML(d.locationName)+"</div>"+(e?'<div class="level-right"><span class="tag is-primary">'+pts.escapeHTML(e.locationClass)+"</span></div>":"")+"</div>";a.insertAdjacentElement("beforeend",k)}b=document.getElementById("container--parkingLocations");pts.clearElement(b);b.insertAdjacentElement("beforeend",
a)})};a=function(a){a.preventDefault();pts.openHtmlModal("ticket-setLocation",{onshown:function(a,f){b=f;h()},onremoved:function(){document.getElementById("is-location-lookup-button").focus()}})};document.getElementById("is-location-lookup-button").addEventListener("click",a);document.getElementById("ticket--locationName").addEventListener("dblclick",a)});var p,h=[],q=function(a){a.preventDefault();a=h[parseInt(a.currentTarget.getAttribute("data-index"))];document.getElementById("ticket--bylawNumber").value=
a.bylawNumber;var b=document.getElementById("ticket--offenceAmount");b.classList.add("is-readonly");b.setAttribute("readonly","readonly");b.closest(".field").getElementsByClassName("is-unlock-field-button")[0].removeAttribute("disabled");b.value=a.offenceAmount;document.getElementById("ticket--parkingOffence").value=a.bylawDescription;p();h=[]},r=function(){var a=document.getElementById("ticket--locationKey").value;document.getElementById("ticket--locationName");pts.postJSON("/offences/doGetOffencesByLocation",
{locationKey:a},function(a){h=a;a=document.createElement("div");a.className="list is-hoverable has-margin-bottom-20";for(var b=0;b<h.length;b+=1){var f=h[b],c=document.createElement("a");c.className="list-item";c.setAttribute("data-index",b);c.setAttribute("href","#");c.addEventListener("click",q);c.innerHTML='<div class="columns">'+('<div class="column">'+pts.escapeHTML(f.bylawNumber)+"<br /><small>"+pts.escapeHTML(f.bylawDescription)+"</small></div>")+('<div class="column is-narrow">$ '+f.offenceAmount.toFixed(2)+
"</div>")+"</div>";a.insertAdjacentElement("beforeend",c)}b=document.getElementById("container--bylawNumbers");pts.clearElement(b);b.appendChild(a)})},c=function(a){a.preventDefault();pts.openHtmlModal("ticket-setBylawOffence",{onshown:function(a,c){p=c;r();document.getElementById("bylawLookup--searchStr").focus()},onremoved:function(){document.getElementById("is-bylaw-lookup-button").focus()}})};document.getElementById("is-bylaw-lookup-button").addEventListener("click",c);document.getElementById("ticket--bylawNumber").addEventListener("dblclick",
c);c=function(){var a=document.getElementById("datalist--licencePlateProvince");pts.clearElement(a);var b=pts.getLicencePlateCountryProperties(document.getElementById("ticket--licencePlateCountry").value);if(b&&b.provinces)for(var b=Object.values(b.provinces),c=0;c<b.length;c+=1){var d=document.createElement("option");d.setAttribute("value",b[c].provinceShortName);a.appendChild(d)}};document.getElementById("ticket--licencePlateCountry").addEventListener("change",c);pts.loadDefaultConfigProperties(c);
var l=document.getElementById("is-remark-panel"),m=pts.ticketRemarksInit;delete pts.ticketRemarksInit;document.getElementById("is-add-remark-button").addEventListener("click",function(a){a.preventDefault()});(function(){for(var a=l.getElementsByClassName("panel-block"),b=0;b<a.length;b+=1)a[b].remove();if(0===m.length)l.insertAdjacentHTML("beforeend",'<div class="panel is-block"><div class="message is-info"><p class="message-body">There are no remarks associated with this ticket.</p></div></div>');
else for(a=0;a<m.length;a+=1){var b=m[a],c=document.createElement("div");c.className="panel-block is-block";c.innerHTML='<div class="columns">'+('<div class="column"><p class="has-newline-chars">'+pts.escapeHTML(b.remark)+'</p><p class="is-size-7">'+(b.recordCreate_timeMillis===b.recordUpdate_timeMillis?"":'<i class="fas fa-pencil-alt" aria-hidden="true"></i> ')+b.recordUpdate_userName+" - "+b.remarkDateString+" "+b.remarkTimeString+"</p></div>")+('<div class="column is-narrow"><div class="buttons"><button class="button is-small is-edit-remark-button" data-index="'+
a+'" type="button"><span class="icon is-small"><i class="fas fa-pencil-alt" aria-hidden="true"></i></span> <span>Edit</span></button></div></div>')+"</div>";l.appendChild(c)}})();for(var c=function(a){a.preventDefault();a=a.currentTarget;var b=a.getAttribute("data-unlock"),b=a.closest(".field").getElementsByTagName(b)[0];b.removeAttribute("readonly");b.classList.remove("is-readonly");b.focus();a.setAttribute("disabled","disabled")},g=document.getElementsByClassName("is-unlock-field-button"),n=0;n<
g.length;n+=1)g[n].addEventListener("click",c)})();
