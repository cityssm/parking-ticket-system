"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{var e,t,n,i;let s="";const a=document.querySelector("#form--filters"),l=document.querySelector("#filter--offset"),c=document.querySelector("#container--searchResults");function o(e){const t=document.createElement("tr"),n=pts.getLicencePlateLocationProperties(e.licencePlateCountry,e.licencePlateProvince);let i="";e.locationClassKey&&(i=pts.getLocationClass(e.locationClassKey).locationClass);const s=pts.getTicketStatus(e.latestStatus_statusKey);return t.innerHTML=`<td>\n        <a href="/tickets/${e.ticketID.toString()}" data-tooltip="View Parking Ticket">\n        ${e.ticketNumber}\n        </a>\n      </td>\n      <td class="is-nowrap">\n        ${e.issueDateString}\n      </td>\n      <td>\n      <div class="licence-plate is-fullwidth"\n        style="\n        --color:${n.licencePlateProvince.color};\n        --backgroundColor:${n.licencePlateProvince.backgroundColor}\n        ">\n        <div class="licence-plate-province">\n           ${n.licencePlateProvinceAlias}\n        </div>\n    \n        <div class="licence-plate-number">\n        ${""===e.licencePlateNumber?'<i class="fas fa-question-circle has-opacity-2" aria-hidden="true"></i>':cityssm.escapeHTML(e.licencePlateNumber)}\n        </div>\n      </div>\n      </td>\n      <td>\n      ${e.locationDescription?`${e.locationDescription}<br />`:""}\n      ${e.locationKey&&""!==e.locationKey&&e.locationName?`<small class="has-tooltip-right" data-tooltip="${i}">\n            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>\n            ${cityssm.escapeHTML(e.locationName)}\n            </small>`:""}\n    </td>\n    <td>\n    ${cityssm.escapeHTML(e.parkingOffence)}\n    </td>\n    <td>\n    ${""===e.resolvedDateString?"Unresolved":'<span class="sr-only">Resolved</span><i class="fas fa-check" aria-hidden="true"></i> '+e.resolvedDateString}\n    ${e.latestStatus_statusKey?'<br /><span class="tag is-light is-primary">'+s.status+"</span>":""}\n    </td>`,t}function r(e){const t=e.tickets;if(0===t.length)return void(c.innerHTML='<div class="message is-info">\n        <div class="message-body">\n        <strong>Your search returned no results.</strong><br />\n        Please try expanding your search criteria.\n        </div>\n        </div>');c.innerHTML=`<table class="table is-fullwidth is-striped is-hoverable">\n      <thead><tr>\n      <th>\n      ${cityssm.escapeHTML(s)}\n      </th>\n      <th>Issue Date</th>\n      <th>Plate Number</th>\n      <th>Location</th>\n      <th>Offence</th>\n      <th>Status</th>\n      </tr></thead>\n      <tbody></tbody>\n      </table>`;const n=c.querySelector("tbody");for(const e of t){const t=o(e);n.append(t)}if(c.insertAdjacentHTML("beforeend",`<div class="level is-block-print">\n        <div class="level-left has-text-weight-bold">\n        Displaying parking tickets\n        ${(e.offset+1).toString()}\n        to\n        ${Math.min(e.limit+e.offset,e.count).toString()}\n        of\n        ${e.count.toString()}\n        </div>\n      </div>`),e.limit<e.count){const t=document.createElement("nav");if(t.className="level-right is-hidden-print",t.setAttribute("role","pagination"),t.setAttribute("aria-label","pagination"),e.offset>0){const n=document.createElement("a");n.className="button",n.textContent="Previous",n.addEventListener("click",t=>{t.preventDefault(),l.value=Math.max(0,e.offset-e.limit).toString(),c.scrollIntoView(!0),d()}),t.append(n)}if(e.limit+e.offset<e.count){const n=document.createElement("a");n.className="button ml-3",n.innerHTML='<span>Next Tickets</span>\n          <span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',n.addEventListener("click",t=>{t.preventDefault(),l.value=(e.offset+e.limit).toString(),c.scrollIntoView(!0),d()}),t.append(n)}c.querySelectorAll(".level")[0].append(t)}}function d(){cityssm.clearElement(c),c.innerHTML='<p class="has-text-centered has-text-grey-light">\n      <i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br />\n      <em>Loading tickets...</em>\n      </p>',cityssm.postJSON("/tickets/doGetTickets",a,r)}function u(){l.value="0",d()}a.addEventListener("submit",e=>{e.preventDefault()}),null===(e=document.querySelector("#filter--ticketNumber"))||void 0===e||e.addEventListener("change",u),null===(t=document.querySelector("#filter--licencePlateNumber"))||void 0===t||t.addEventListener("change",u),null===(n=document.querySelector("#filter--location"))||void 0===n||n.addEventListener("change",u),null===(i=document.querySelector("#filter--isResolved"))||void 0===i||i.addEventListener("change",u),pts.getDefaultConfigProperty("ticketNumber_fieldLabel",e=>{s=e,pts.getDefaultConfigProperty("locationClasses",d)})})();