(function(){function l(){var b=parseInt(q.value),e=parseInt(k.value);f.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading tickets...</p>';pts.postJSON("/tickets/doGetTickets",h,function(a){var c=a.tickets;if(0===c.length)f.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>';else{f.innerHTML=
'<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>'+pts.escapeHTML(n)+"</th><th>Issue Date</th><th>Plate Number</th><th>Location</th><th>Offence</th><th>Status</th></tr></thead><tbody></tbody></table>";for(var g=f.getElementsByTagName("tbody")[0],m=0;m<c.length;m+=1){var d=c[m],h=document.createElement("tr");h.innerHTML='<td><a href="/tickets/'+d.ticketID+'" data-tooltip="View Parking Ticket">'+d.ticketNumber+"</a></td><td>"+d.issueDateString+"</td><td>"+pts.escapeHTML(d.licencePlateNumber)+
"</td><td>"+pts.escapeHTML(d.locationDescription)+"</td><td>"+pts.escapeHTML(d.parkingOffence)+"</td><td>"+(""===d.resolvedDateString?"Unresolved":"Resolved "+d.resolvedDateString)+"</td>";g.insertAdjacentElement("beforeend",h)}f.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying parking tickets '+(e+1)+" to "+Math.min(b+e,a.count)+" of "+a.count+"</div></div>");b<a.count&&(c=document.createElement("nav"),c.className="level-right is-hidden-print",
c.setAttribute("role","pagination"),c.setAttribute("aria-label","pagination"),0<e&&(g=document.createElement("a"),g.className="button",g.innerText="Previous",g.addEventListener("click",function(a){a.preventDefault();k.value=Math.max(0,e-b);l()}),c.insertAdjacentElement("beforeend",g)),b+e<a.count&&(a=document.createElement("a"),a.className="button has-margin-left-10",a.innerHTML='<span>Next Licences</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',a.addEventListener("click",
function(a){a.preventDefault();k.value=e+b;l()}),c.insertAdjacentElement("beforeend",a)),f.getElementsByClassName("level")[0].insertAdjacentElement("beforeend",c))}})}function p(){k.value=0;l()}var n="",h=document.getElementById("form--filters"),q=document.getElementById("filter--limit"),k=document.getElementById("filter--offset"),f=document.getElementById("container--searchResults");h.addEventListener("submit",function(b){b.preventDefault()});document.getElementById("filter--isResolved").addEventListener("change",
p);pts.getDefaultConfigProperty("ticketNumber_fieldLabel",function(b){n=b;pts.getDefaultConfigProperty("locationClasses",function(b){for(var a=0;a<b.length;a+=1);p()})})})();
