var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var d=0;return $jscomp.iteratorPrototype(function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,c={next:function(){if(b<a.length){var f=b++;return{value:d(f,a[f]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill=function(a,d,b,c){if(d){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var f=a[c];f in b||(b[f]={});b=b[f]}a=a[a.length-1];c=b[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es6","es3");
(function(){for(var a=""===document.getElementById("ticket--ticketID").value,d=document.getElementById("container--form-message"),b=function(a){pts.enableNavBlocker();d.innerHTML='<span class="tag is-light is-info is-medium"><span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span> <span>Unsaved Changes</span></div>'},c=document.querySelectorAll(".input, .select, .textarea"),f=0;f<c.length;f+=1)c[f].addEventListener("change",b);document.getElementById("form--ticket").addEventListener("submit",
function(g){g.preventDefault();d.innerHTML='<span class="tag is-light is-info is-medium"><span>Saving ticket... </span> <span class="icon"><i class="fas fa-circle-notch fa-spin" aria-hidden="true"></i></span></div>';pts.postJSON(a?"/tickets/doCreateTicket":"/tickets/doUpdateTicket",g.currentTarget,function(a){a.success&&(d.innerHTML='<span class="tag is-light is-success is-medium"><span class="icon"><i class="fas fa-check" aria-hidden="true"></i></span> <span>Saved Successfully</span></div>')})});
pts.getDefaultConfigProperty("locationClasses",function(a){for(var e,b={},g={},c=0;c<a.length;c+=1){var d=a[c];b[d.locationClassKey]=d}var f=function(a){a.preventDefault();a=g[parseInt(a.currentTarget.getAttribute("data-index"))];document.getElementById("ticket--locationKey").value=a.locationKey;document.getElementById("ticket--locationName").value=a.locationName;e();g=[]},h=function(){pts.postJSON("/offences/doGetAllLocations",{},function(a){g=a;a=document.createElement("div");a.className="list is-hoverable";
for(var e=0;e<g.length;e+=1){var c=g[e],d=b[c.locationClassKey],k=document.createElement("a");k.className="list-item";k.setAttribute("data-index",e);k.setAttribute("href","#");k.addEventListener("click",f);k.innerHTML='<div class="level"><div class="level-left">'+pts.escapeHTML(c.locationName)+"</div>"+(d?'<div class="level-right"><span class="tag is-primary">'+pts.escapeHTML(d.locationClass)+"</span></div>":"")+"</div>";a.insertAdjacentElement("beforeend",k)}e=document.getElementById("container--parkingLocations");
pts.clearElement(e);e.insertAdjacentElement("beforeend",a)})};a=function(a){a.preventDefault();pts.openHtmlModal("ticket-setLocation",{onshown:function(a,b){e=b;h()},onremoved:function(){document.getElementById("is-location-lookup-button").focus()}})};document.getElementById("is-location-lookup-button").addEventListener("click",a);document.getElementById("ticket--locationName").addEventListener("dblclick",a)});var l,h=[],m=function(a){a.preventDefault();a=h[parseInt(a.currentTarget.getAttribute("data-index"))];
document.getElementById("ticket--bylawNumber").value=a.bylawNumber;var e=document.getElementById("ticket--offenceAmount");e.classList.add("is-readonly");e.setAttribute("readonly","readonly");e.closest(".field").getElementsByClassName("is-unlock-field-button")[0].removeAttribute("disabled");e.value=a.offenceAmount;document.getElementById("ticket--parkingOffence").value=a.bylawDescription;l();h=[]},n=function(){var a=document.getElementById("ticket--locationKey").value;document.getElementById("ticket--locationName");
pts.postJSON("/offences/doGetOffencesByLocation",{locationKey:a},function(a){h=a;a=document.createElement("div");a.className="list is-hoverable has-margin-bottom-20";for(var b=0;b<h.length;b+=1){var e=h[b],c=document.createElement("a");c.className="list-item";c.setAttribute("data-index",b);c.setAttribute("href","#");c.addEventListener("click",m);c.innerHTML='<div class="columns">'+('<div class="column">'+pts.escapeHTML(e.bylawNumber)+"<br /><small>"+pts.escapeHTML(e.bylawDescription)+"</small></div>")+
('<div class="column is-narrow">$ '+e.offenceAmount.toFixed(2)+"</div>")+"</div>";a.insertAdjacentElement("beforeend",c)}b=document.getElementById("container--bylawNumbers");pts.clearElement(b);b.appendChild(a)})},b=function(a){a.preventDefault();pts.openHtmlModal("ticket-setBylawOffence",{onshown:function(a,b){l=b;n();document.getElementById("bylawLookup--searchStr").focus()},onremoved:function(){document.getElementById("is-bylaw-lookup-button").focus()}})};document.getElementById("is-bylaw-lookup-button").addEventListener("click",
b);document.getElementById("ticket--bylawNumber").addEventListener("dblclick",b);b=function(){var a=document.getElementById("datalist--licencePlateProvince");pts.clearElement(a);var b=pts.getLicencePlateCountryProperties(document.getElementById("ticket--licencePlateCountry").value);if(b&&b.provinces)for(var b=Object.values(b.provinces),c=0;c<b.length;c+=1){var d=document.createElement("option");d.setAttribute("value",b[c].provinceShortName);a.appendChild(d)}};document.getElementById("ticket--licencePlateCountry").addEventListener("change",
b);pts.loadDefaultConfigProperties(b);b=function(a){a.preventDefault();a=a.currentTarget;var b=a.getAttribute("data-unlock"),b=a.closest(".field").getElementsByTagName(b)[0];b.removeAttribute("readonly");b.classList.remove("is-readonly");b.focus();a.setAttribute("disabled","disabled")};c=document.getElementsByClassName("is-unlock-field-button");for(f=0;f<c.length;f+=1)c[f].addEventListener("click",b)})();
