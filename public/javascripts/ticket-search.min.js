"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){const e={};let t="";const a=document.getElementById("form--filters"),i=document.getElementById("filter--limit"),n=document.getElementById("filter--offset"),s=document.getElementById("container--searchResults");function l(){const c=parseInt(i.value),o=parseInt(n.value);cityssm.clearElement(s),s.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading tickets...</p>',cityssm.postJSON("/tickets/doGetTickets",a,function(a){const i=a.tickets;if(0===i.length)return void(s.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>');s.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>'+cityssm.escapeHTML(t)+"</th><th>Issue Date</th><th>Plate Number</th><th>Location</th><th>Offence</th><th>Status</th></tr></thead><tbody></tbody></table>";const r=s.getElementsByTagName("tbody")[0];for(let t=0;t<i.length;t+=1){const a=i[t],n=document.createElement("tr"),s=pts.getLicencePlateLocationProperties(a.licencePlateCountry,a.licencePlateProvince);let l="";if(a.locationClassKey){const t=e[a.locationClassKey];t&&(l=t.locationClass)}const c=pts.getTicketStatus(a.latestStatus_statusKey);n.innerHTML='<td><a href="/tickets/'+a.ticketID+'" data-tooltip="View Parking Ticket">'+a.ticketNumber+'</a></td><td class="is-nowrap">'+a.issueDateString+'</td><td><div class="licence-plate is-fullwidth" style="--color:'+s.licencePlateProvince.color+";--backgroundColor:"+s.licencePlateProvince.backgroundColor+'"><div class="licence-plate-province">'+s.licencePlateProvinceAlias+'</div><div class="licence-plate-number">'+(""===a.licencePlateNumber?'<i class="fas fa-question-circle has-opacity-2" aria-hidden="true"></i>':cityssm.escapeHTML(a.licencePlateNumber))+"</div></div></td><td>"+(a.locationDescription?cityssm.escapeHTML(a.locationDescription)+"<br />":"")+(a.locationKey&&""!==a.locationKey&&a.locationName?'<small class="has-tooltip-right" data-tooltip="'+cityssm.escapeHTML(l)+'"><i class="fas fa-map-marker-alt" aria-hidden="true"></i> '+a.locationName+"</small>":"")+"</td><td>"+cityssm.escapeHTML(a.parkingOffence)+"</td><td>"+(""===a.resolvedDateString?"Unresolved":'<span class="sr-only">Resolved</span><i class="fas fa-check" aria-hidden="true"></i> '+a.resolvedDateString)+(a.latestStatus_statusKey?'<br /><span class="tag is-light is-primary">'+c.status+"</span>":"")+"</td>",r.appendChild(n)}if(s.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying parking tickets '+(o+1)+" to "+Math.min(c+o,a.count)+" of "+a.count+"</div></div>"),c<a.count){const e=document.createElement("nav");if(e.className="level-right is-hidden-print",e.setAttribute("role","pagination"),e.setAttribute("aria-label","pagination"),o>0){const t=document.createElement("a");t.className="button",t.innerText="Previous",t.addEventListener("click",function(e){e.preventDefault(),n.value=Math.max(0,o-c).toString(),s.scrollIntoView(!0),l()}),e.appendChild(t)}if(c+o<a.count){const t=document.createElement("a");t.className="button has-margin-left-10",t.innerHTML='<span>Next Tickets</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',t.addEventListener("click",function(e){e.preventDefault(),n.value=(o+c).toString(),s.scrollIntoView(!0),l()}),e.appendChild(t)}s.getElementsByClassName("level")[0].appendChild(e)}})}function c(){n.value="0",l()}a.addEventListener("submit",function(e){e.preventDefault()}),document.getElementById("filter--ticketNumber").addEventListener("change",c),document.getElementById("filter--licencePlateNumber").addEventListener("change",c),document.getElementById("filter--location").addEventListener("change",c),document.getElementById("filter--isResolved").addEventListener("change",c),pts.getDefaultConfigProperty("ticketNumber_fieldLabel",function(a){t=a,pts.getDefaultConfigProperty("locationClasses",function(t){for(let a=0;a<t.length;a+=1){const i=t[a];e[i.locationClassKey]=i}l()})})}();