(function(){function m(){var h=parseInt(n.value),e=parseInt(l.value);f.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading licence plates...</p>';pts.postJSON("/plates/doGetLicencePlates",k,function(b){var c=b.licencePlates;if(0===c.length)f.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>';
else{f.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>Licence Plate Number</th><th>Province</th><th>Country</th><th>Ownership Record</th><th>Outstanding Tickets</th></tr></thead><tbody></tbody></table>';for(var g=f.getElementsByTagName("tbody")[0],d=0;d<c.length;d+=1){var a=c[d],k=document.createElement("tr"),n="/plates/"+(""===a.licencePlateCountry?"_":encodeURIComponent(a.licencePlateCountry))+"/"+(""===a.licencePlateProvince?"_":encodeURIComponent(a.licencePlateProvince))+
"/"+(""===a.licencePlateNumber?"_":encodeURIComponent(a.licencePlateNumber));k.innerHTML='<td><a href="'+n+'" data-tooltip="View Licence Plate">'+(""===a.licencePlateNumber?"(Blank)":a.licencePlateNumber)+"</a></td>"+("<td>"+(""===a.licencePlateProvince?'<span class="has-text-grey">(Blank)</span>':a.licencePlateProvince)+"</td>")+("<td>"+(""===a.licencePlateCountry?'<span class="has-text-grey">(Blank)</span>':a.licencePlateCountry)+"</td>")+("<td>"+a.hasOwnerRecord+"</td>")+("<td>"+a.unresolvedTicketCount+
"</td>");g.appendChild(k)}f.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying licence plates '+(e+1)+" to "+Math.min(h+e,b.count)+" of "+b.count+"</div></div>");h<b.count&&(c=document.createElement("nav"),c.className="level-right is-hidden-print",c.setAttribute("role","pagination"),c.setAttribute("aria-label","pagination"),0<e&&(g=document.createElement("a"),g.className="button",g.innerText="Previous",g.addEventListener("click",
function(a){a.preventDefault();l.value=Math.max(0,e-h);m()}),c.appendChild(g)),h+e<b.count&&(b=document.createElement("a"),b.className="button has-margin-left-10",b.innerHTML='<span>Next Licence Plates</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',b.addEventListener("click",function(a){a.preventDefault();l.value=e+h;m()}),c.appendChild(b)),f.getElementsByClassName("level")[0].appendChild(c))}})}function d(){l.value=0;m()}var k=document.getElementById("form--filters"),
n=document.getElementById("filter--limit"),l=document.getElementById("filter--offset"),f=document.getElementById("container--searchResults");k.addEventListener("submit",function(d){d.preventDefault()});document.getElementById("filter--licencePlateNumber").addEventListener("change",d);document.getElementById("filter--hasOwnerRecord").addEventListener("change",d);document.getElementById("filter--hasUnresolvedTickets").addEventListener("change",d);pts.loadDefaultConfigProperties(d)})();
