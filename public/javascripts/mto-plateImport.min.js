"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),document.getElementById("mtoImport--importFile").addEventListener("change",function(e){var s=document.getElementById("mtoImport--importFileName"),t=document.getElementById("mtoImport--importFileMessage"),a=e.currentTarget;if(a.files.length>0){var i=a.files[0].name;s.innerText=i,/^\d+[.]txt$/gim.test(i)?cityssm.clearElement(t):t.innerHTML='<div class="tag is-warning"><span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span><span>MTO file names are generally a number with a ".txt" extension.</span></div>'}}),document.getElementById("form--mtoImport").addEventListener("submit",function(e){e.preventDefault();var s=e.currentTarget,t=document.getElementById("step-item--upload");t.classList.add("is-completed"),t.classList.add("is-success"),t.classList.remove("is-active"),t.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-check" aria-hidden="true"></i>';var a=document.getElementById("step-item--update");a.classList.add("is-active"),a.getElementsByClassName("step-marker")[0].innerHTML='<span class="icon"><i class="fas fa-cogs" aria-hidden="true"></i></span>',document.getElementById("step--upload").classList.add("is-hidden"),document.getElementById("step--update").classList.remove("is-hidden"),cityssm.postJSON("/plates-ontario/doMTOImportUpload",s,function(e){a.classList.add("is-completed"),a.classList.remove("is-active");var s=document.getElementById("mtoImport--message");e.success?(a.classList.add("is-success"),a.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',s.classList.add("is-success"),s.innerHTML='<div class="message-body"><p><strong>The file was imported successfully.</strong></p></div>'):(a.classList.add("is-danger"),a.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-exclamation" aria-hidden="true"></i>',s.classList.add("is-danger"),s.innerHTML='<div class="message-body"><p><strong>An error occurred while importing the file.</strong></p><p>'+cityssm.escapeHTML(e.message)+"</p></div>"),document.getElementById("step-item--results").classList.add("is-active"),document.getElementById("step--update").classList.add("is-hidden"),document.getElementById("step--results").classList.remove("is-hidden")})});