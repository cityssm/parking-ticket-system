"use strict";var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0}),null===(_a=document.querySelector("#mtoImport--importFile"))||void 0===_a||_a.addEventListener("change",e=>{var s;const t=document.querySelector("#mtoImport--importFileName"),i=document.querySelector("#mtoImport--importFileMessage"),a=e.currentTarget;if((null!==(s=a.files)&&void 0!==s?s:[]).length>0){const e=a.files[0].name;t.textContent=e,/^\d+\.txt$/gim.test(e)?cityssm.clearElement(i):i.innerHTML='<div class="tag is-warning">\n          <span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span>\n          <span>MTO file names are generally a number with a ".txt" extension.</span>\n          </div>'}}),null===(_b=document.querySelector("#form--mtoImport"))||void 0===_b||_b.addEventListener("submit",e=>{var s,t;e.preventDefault();const i=e.currentTarget,a=document.querySelector("#step-item--upload");a.classList.add("is-completed"),a.classList.add("is-success"),a.classList.remove("is-active"),a.querySelector(".icon").innerHTML='<i class="fas fa-check" aria-hidden="true"></i>';const r=document.querySelector("#step-item--update");r.classList.add("is-active"),r.querySelector(".step-marker").innerHTML='<span class="icon">\n      <i class="fas fa-cogs" aria-hidden="true"></i>\n      </span>',null===(s=document.querySelector("#step--upload"))||void 0===s||s.classList.add("is-hidden"),null===(t=document.querySelector("#step--update"))||void 0===t||t.classList.remove("is-hidden"),cityssm.postJSON("/plates-ontario/doMTOImportUpload",i,e=>{var s,t,i,a;r.classList.add("is-completed"),r.classList.remove("is-active");const n=document.querySelector("#mtoImport--message");e.success?(r.classList.add("is-success"),r.querySelector(".icon").innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',n.classList.add("is-success"),n.innerHTML='<div class="message-body">\n            <p><strong>The file was imported successfully.</strong></p>\n            </div>'):(r.classList.add("is-danger"),r.querySelector(".icon").innerHTML='<i class="fas fa-exclamation" aria-hidden="true"></i>',n.classList.add("is-danger"),n.innerHTML=`<div class="message-body">\n            <p><strong>An error occurred while importing the file.</strong></p>\n            <p>${cityssm.escapeHTML(null!==(s=e.message)&&void 0!==s?s:"")}</p>\n            </div>`),null===(t=document.querySelector("#step-item--results"))||void 0===t||t.classList.add("is-active"),null===(i=document.querySelector("#step--update"))||void 0===i||i.classList.add("is-hidden"),null===(a=document.querySelector("#step--results"))||void 0===a||a.classList.remove("is-hidden")})});