"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){const e={};let t="";const i=document.getElementById("form--filters"),n=document.getElementById("filter--limit"),a=document.getElementById("filter--offset"),s=document.getElementById("container--searchResults");function l(){const c=parseInt(n.value,10),o=parseInt(a.value,10);cityssm.clearElement(s),s.innerHTML='<p class="has-text-centered has-text-grey-lighter"><i class="fas fa-3x fa-circle-notch fa-spin" aria-hidden="true"></i><br /><em>Loading tickets...</p>',cityssm.postJSON("/tickets/doGetTickets",i,function(i){const n=i.tickets;if(0===n.length)return void(s.innerHTML='<div class="message is-info"><div class="message-body"><strong>Your search returned no results.</strong><br />Please try expanding your search criteria.</div></div>');s.innerHTML='<table class="table is-fullwidth is-striped is-hoverable"><thead><tr><th>'+cityssm.escapeHTML(t)+"</th><th>Issue Date</th><th>Plate Number</th><th>Location</th><th>Offence</th><th>Status</th></tr></thead><tbody></tbody></table>";const r=s.getElementsByTagName("tbody")[0];for(let t=0;t<n.length;t+=1){const i=n[t],a=document.createElement("tr"),s=pts.getLicencePlateLocationProperties(i.licencePlateCountry,i.licencePlateProvince);let l="";if(i.locationClassKey){const t=e[i.locationClassKey];t&&(l=t.locationClass)}const c=pts.getTicketStatus(i.latestStatus_statusKey);a.innerHTML='<td><a href="/tickets/'+i.ticketID+'" data-tooltip="View Parking Ticket">'+i.ticketNumber+'</a></td><td class="is-nowrap">'+i.issueDateString+'</td><td><div class="licence-plate is-fullwidth" style="--color:'+s.licencePlateProvince.color+";--backgroundColor:"+s.licencePlateProvince.backgroundColor+'"><div class="licence-plate-province">'+s.licencePlateProvinceAlias+'</div><div class="licence-plate-number">'+(""===i.licencePlateNumber?'<i class="fas fa-question-circle has-opacity-2" aria-hidden="true"></i>':cityssm.escapeHTML(i.licencePlateNumber))+"</div></div></td><td>"+(i.locationDescription?cityssm.escapeHTML(i.locationDescription)+"<br />":"")+(i.locationKey&&""!==i.locationKey&&i.locationName?'<small class="has-tooltip-right" data-tooltip="'+cityssm.escapeHTML(l)+'"><i class="fas fa-map-marker-alt" aria-hidden="true"></i> '+i.locationName+"</small>":"")+"</td><td>"+cityssm.escapeHTML(i.parkingOffence)+"</td><td>"+(""===i.resolvedDateString?"Unresolved":'<span class="sr-only">Resolved</span><i class="fas fa-check" aria-hidden="true"></i> '+i.resolvedDateString)+(i.latestStatus_statusKey?'<br /><span class="tag is-light is-primary">'+c.status+"</span>":"")+"</td>",r.appendChild(a)}if(s.insertAdjacentHTML("beforeend",'<div class="level is-block-print"><div class="level-left has-text-weight-bold">Displaying parking tickets '+(o+1)+" to "+Math.min(c+o,i.count)+" of "+i.count+"</div></div>"),c<i.count){const e=document.createElement("nav");if(e.className="level-right is-hidden-print",e.setAttribute("role","pagination"),e.setAttribute("aria-label","pagination"),o>0){const t=document.createElement("a");t.className="button",t.innerText="Previous",t.addEventListener("click",function(e){e.preventDefault(),a.value=Math.max(0,o-c).toString(),s.scrollIntoView(!0),l()}),e.appendChild(t)}if(c+o<i.count){const t=document.createElement("a");t.className="button ml-3",t.innerHTML='<span>Next Tickets</span><span class="icon"><i class="fas fa-chevron-right" aria-hidden="true"></i></span>',t.addEventListener("click",function(e){e.preventDefault(),a.value=(o+c).toString(),s.scrollIntoView(!0),l()}),e.appendChild(t)}s.getElementsByClassName("level")[0].appendChild(e)}})}function c(){a.value="0",l()}i.addEventListener("submit",function(e){e.preventDefault()}),document.getElementById("filter--ticketNumber").addEventListener("change",c),document.getElementById("filter--licencePlateNumber").addEventListener("change",c),document.getElementById("filter--location").addEventListener("change",c),document.getElementById("filter--isResolved").addEventListener("change",c),pts.getDefaultConfigProperty("ticketNumber_fieldLabel",function(i){t=i,pts.getDefaultConfigProperty("locationClasses",function(t){for(let i=0;i<t.length;i+=1){const n=t[i];e[n.locationClassKey]=n}l()})})}();