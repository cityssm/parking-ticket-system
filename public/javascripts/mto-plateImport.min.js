"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),document.getElementById("mtoImport--importFile").addEventListener("change",function(e){const s=document.getElementById("mtoImport--importFileName"),t=document.getElementById("mtoImport--importFileMessage"),i=e.currentTarget;if(i.files.length>0){const e=i.files[0].name;s.innerText=e,/^\d+[.]txt$/gim.test(e)?cityssm.clearElement(t):t.innerHTML='<div class="tag is-warning"><span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span><span>MTO file names are generally a number with a ".txt" extension.</span></div>'}}),document.getElementById("form--mtoImport").addEventListener("submit",function(e){e.preventDefault();const s=e.currentTarget,t=document.getElementById("step-item--upload");t.classList.add("is-completed"),t.classList.add("is-success"),t.classList.remove("is-active"),t.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-check" aria-hidden="true"></i>';const i=document.getElementById("step-item--update");i.classList.add("is-active"),i.getElementsByClassName("step-marker")[0].innerHTML='<span class="icon"><i class="fas fa-cogs" aria-hidden="true"></i></span>',document.getElementById("step--upload").classList.add("is-hidden"),document.getElementById("step--update").classList.remove("is-hidden"),cityssm.postJSON("/plates-ontario/doMTOImportUpload",s,function(e){i.classList.add("is-completed"),i.classList.remove("is-active");const s=document.getElementById("mtoImport--message");e.success?(i.classList.add("is-success"),i.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',s.classList.add("is-success"),s.innerHTML='<div class="message-body"><p><strong>The file was imported successfully.</strong></p></div>'):(i.classList.add("is-danger"),i.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-exclamation" aria-hidden="true"></i>',s.classList.add("is-danger"),s.innerHTML='<div class="message-body"><p><strong>An error occurred while importing the file.</strong></p><p>'+cityssm.escapeHTML(e.message)+"</p></div>"),document.getElementById("step-item--results").classList.add("is-active"),document.getElementById("step--update").classList.add("is-hidden"),document.getElementById("step--results").classList.remove("is-hidden")})});