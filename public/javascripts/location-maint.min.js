var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[f]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var f=0;return $jscomp.iteratorPrototype(function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var f=a[Symbol.iterator];return f?f.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};
$jscomp.polyfill=function(a,f,c,d){if(f){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var h=a[d];h in c||(c[h]={});c=c[h]}a=a[a.length-1];d=c[a];f=f(d);f!=d&&null!=f&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("WeakMap",function(a){function f(a){$jscomp.owns(a,d)||$jscomp.defineProperty(a,d,{value:{}})}function c(a){var b=Object[a];b&&(Object[a]=function(a){f(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var g=Object.seal({}),b=Object.seal({}),e=new a([[g,2],[b,3]]);if(2!=e.get(g)||3!=e.get(b))return!1;e["delete"](g);e.set(b,4);return!e.has(g)&&4==e.get(b)}catch(p){return!1}}())return a;var d="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var h=0,k=function(a){this.id_=(h+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};k.prototype.set=function(a,b){f(a);if(!$jscomp.owns(a,d))throw Error("WeakMap key fail: "+a);a[d][this.id_]=b;return this};k.prototype.get=function(a){return $jscomp.owns(a,d)?a[d][this.id_]:void 0};k.prototype.has=function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)};k.prototype["delete"]=
function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)?delete a[d][this.id_]:!1};return k},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(a){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),e=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=e.get(b)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var p=e.entries(),c=p.next();if(c.done||c.value[0]!=b||"s"!=c.value[1])return!1;c=p.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!p.next().done?!1:!0}catch(r){return!1}}())return a;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var f=new WeakMap,c=function(a){this.data_={};this.head_=k();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,e){var b=d(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=e:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:e},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};c.prototype["delete"]=
function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=k();this.size=0};c.prototype.has=function(a){return!!d(this,a).entry};c.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};c.prototype.entries=function(){return h(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return h(this,function(a){return a.key})};c.prototype.values=function(){return h(this,function(a){return a.value})};c.prototype.forEach=function(a,e){for(var b=this.entries(),c;!(c=b.next()).done;)c=c.value,a.call(e,c[1],c[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var d=function(a,c){var b;b=c&&typeof c;"object"==b||"function"==b?f.has(c)?b=f.get(c):(b=""+ ++g,f.set(c,b)):b="p_"+c;var e=a.data_[b];if(e&&$jscomp.owns(a.data_,b))for(var d=0;d<
e.length;d++){var l=e[d];if(c!==c&&l.key!==l.key||c===l.key)return{id:b,list:e,index:d,entry:l}}return{id:b,list:e,index:-1,entry:void 0}},h=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},k=function(){var a={};return a.previous=a.next=a.head=a},g=0;return c},"es6-impl","es3");
(function(){function a(a){a.preventDefault();a=parseInt(a.currentTarget.getAttribute("data-index"));var c=b[a],e,d=function(){pts.postJSON("/offences/doDeleteLocation",{locationKey:c.locationKey},function(a){a.success&&(e(),b=a.locations,g())})},l=function(a){a.preventDefault();pts.confirmModal("Delete Location",'Are you sure you want to remove "'+c.locationName+'" from the list of available options?',"Yes, Remove Location","danger",d)},h=function(a){a.preventDefault();pts.postJSON("/offences/doUpdateLocation",
a.currentTarget,function(a){a.success&&(e(),b=a.locations,g())})};pts.openHtmlModal("location-edit",{onshow:function(){document.getElementById("editLocation--locationKey").value=c.locationKey;var a=document.getElementById("editLocation--locationClassKey");a.innerHTML=f;k.has(c.locationClassKey)||a.insertAdjacentHTML("beforeend",'<option value="'+pts.escapeHTML(c.locationClassKey)+'">'+pts.escapeHTML(c.locationClassKey)+"</option>");a.value=c.locationClassKey;document.getElementById("editLocation--locationName").value=
c.locationName},onshown:function(a,c){e=c;a.getElementsByTagName("form")[0].addEventListener("submit",h);a.getElementsByClassName("is-delete-button")[0].addEventListener("click",l)}})}var f="",c=document.getElementById("locationFilter--locationClassKey"),d=document.getElementById("locationFilter--locationName"),h=document.getElementById("locationResults"),k=new Map,g,b=pts.locationsInit;delete pts.locationsInit;g=function(){for(var e=0,f=c.value,g=d.value.trim().toLowerCase().split(" "),r=document.createElement("tbody"),
l=0;l<b.length;l+=1){var m=b[l];if(""===f||f===m.locationClassKey){for(var q=!0,n=m.locationName.toLowerCase(),t=0;t<g.length;t+=1)if(-1===n.indexOf(g[t])){q=!1;break}q&&(e+=1,q=k.has(m.locationClassKey)?k.get(m.locationClassKey).locationClass:m.locationClassKey,n=document.createElement("tr"),n.innerHTML='<td><a data-index="'+l+'" href="#">'+pts.escapeHTML(m.locationName)+"</a></td><td>"+pts.escapeHTML(q)+"</td>",n.getElementsByTagName("a")[0].addEventListener("click",a),r.appendChild(n))}}pts.clearElement(h);
0===e?h.innerHTML='<div class="message is-info"><div class="message-body">There are no locations that meet your search criteria.</div></div>':(h.innerHTML='<table class="table is-fixed is-striped is-hoverable is-fullwidth"><thead><tr><th>Location</th><th>Class</th></tr></thead></table>',h.getElementsByTagName("table")[0].appendChild(r))};c.addEventListener("change",g);d.addEventListener("keyup",g);pts.getDefaultConfigProperty("locationClasses",function(a){c.innerHTML='<option value="">(All Location Classes)</option>';
for(var b=0;b<a.length;b+=1){var d=a[b];f+='<option value="'+d.locationClassKey+'">'+pts.escapeHTML(d.locationClass)+"</option>";k.set(d.locationClassKey,d)}c.insertAdjacentHTML("beforeend",f);g()});document.getElementById("is-add-location-button").addEventListener("click",function(a){a.preventDefault();var c,d=function(a){a.preventDefault();pts.postJSON("/offences/doAddLocation",a.currentTarget,function(a){a.success?(c(),b=a.locations,g()):pts.alertModal("Location Not Added",a.message,"OK","danger")})};
pts.openHtmlModal("location-add",{onshown:function(a,b){c=b;document.getElementById("addLocation--locationClassKey").insertAdjacentHTML("beforeend",f);a.getElementsByTagName("form")[0].addEventListener("submit",d)}})})})();
