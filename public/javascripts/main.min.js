window.pts={};pts.clearElement=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};pts.escapeHTML=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};pts.responseToJSON=function(a){return a.json()};
pts.postJSON=function(a,b,g){var d={method:"POST",credentials:"include"};b&&(b.tagName&&"FORM"===b.tagName?d.body=new URLSearchParams(new FormData(b)):b.constructor===Object&&(d.headers={"Content-Type":"application/json"},d.body=JSON.stringify(b)));window.fetch(a,d).then(pts.responseToJSON).then(g)};
(function(){var a={},b=!1;pts.loadDefaultConfigProperties=function(c){b&&c();pts.postJSON("/dashboard/doGetDefaultConfigProperties",{},function(e){a=e;b=!0;try{window.localStorage.setItem("defaultConfigProperties",JSON.stringify(a))}catch(f){}c()})};pts.getDefaultConfigProperty=function(c,e){if(b)e(a[c]);else{try{var f=window.localStorage.getItem("defaultConfigProperties");if(f){a=JSON.parse(f);b=!0;e(a[c]);return}}catch(h){}pts.loadDefaultConfigProperties(function(){e(a[c])})}};pts.getLicencePlateLocationProperties=
function(c,e){if(!b)return{licencePlateCountryAlias:c,licencePlateProvinceAlias:e,licencePlateProvince:{color:"#000",backgroundColor:"#fff"}};var f=a.licencePlateCountryAliases[c]||c,h=e;a.licencePlateProvinceAliases.hasOwnProperty(f)&&(h=a.licencePlateProvinceAliases[f][e]||e);var d={color:"#000",backgroundColor:"#fff"};a.licencePlateProvinces.hasOwnProperty(f)&&(d=a.licencePlateProvinces[f][h]||{color:"#000",backgroundColor:"#fff"});return{licencePlateCountryAlias:f,licencePlateProvinceAlias:h,
licencePlateProvince:d}};var g={},d=!1;pts.getTicketStatus=function(c){var e={statusKey:c,status:c};if(!b)return e;if(!d){for(var f=0;f<a.parkingTicketStatuses.length;f+=1){var h=a.parkingTicketStatuses[f];g[h.statusKey]=h}d=!0}return g[c]||e}})();pts.showModal=function(a){a.classList.add("is-active")};pts.hideModal=function(a){a=a.currentTarget||a;(a.classList.contains("modal")?a:a.closest(".modal")).classList.remove("is-active")};
pts.openHtmlModal=function(a,b){window.fetch("/html/"+a+".html").then(function(a){return a.text()}).then(function(a){var d=document.createElement("div");d.innerHTML=a;var c=d.getElementsByClassName("modal")[0];document.body.insertAdjacentElement("beforeend",d);if(b&&b.onshow)b.onshow(c);c.classList.add("is-active");a=function(){var a=c.classList.contains("is-active");if(!(b&&b.onhide&&a&&b.onhide(c))){c.classList.remove("is-active");if(b&&b.onhidden&&a)b.onhidden(c);d.remove();if(b&&b.onremoved)b.onremoved()}};
if(b&&b.onshown)b.onshown(c,a);for(var e=c.getElementsByClassName("is-close-modal-button"),f=0;f<e.length;f+=1)e[f].addEventListener("click",a)})};
(function(){function a(a){var b=document.createElement("div");b.className="modal is-active";var f=a.contextualColorName||"info",c=a.titleString||"",d=a.bodyHTML||"",e=a.cancelButtomHTML||"Cancel";b.innerHTML='<div class="modal-background"></div><div class="modal-card">'+('<header class="modal-card-head has-background-'+f+'"><h3 class="modal-card-title'+("warning"!==f?" has-text-white":"")+'"></h3></header>')+(""===d?"":'<section class="modal-card-body">'+d+"</section>")+('<footer class="modal-card-foot justify-flex-end">'+
(a.hideCancelButton?"":'<button class="button is-cancel-button" type="button" aria-label="Cancel">'+e+"</button>")+('<button class="button is-ok-button is-'+f+'" type="button" aria-label="OK">'+(a.okButtonHTML||"OK")+"</button>")+"</footer>")+"</div>";b.getElementsByClassName("modal-card-title")[0].innerText=c;a.hideCancelButton||b.getElementsByClassName("is-cancel-button")[0].addEventListener("click",function(){b.remove()});f=b.getElementsByClassName("is-ok-button")[0];f.addEventListener("click",
function(){b.remove();a.callbackFn&&a.callbackFn()});document.body.insertAdjacentElement("beforeend",b);f.focus()}function b(a){return a.returnValue="You have unsaved changes that may be lost."}function g(a){a.preventDefault();pts.confirmModal("Log Out?","<p>Are you sure you want to log out?</p>",'<span class="icon"><i class="fas fa-sign-out-alt" aria-hidden="true"></i></span><span>Log Out</span>',"warning",function(){window.localStorage.clear();window.location.href="/logout"})}pts.confirmModal=function(b,
c,d,e,g){a({contextualColorName:e,titleString:b,bodyHTML:c,okButtonHTML:d,callbackFn:g})};pts.alertModal=function(b,c,d,e){a({contextualColorName:e,titleString:b,bodyHTML:c,hideCancelButton:!0,okButtonHTML:d})};var d=!1;pts.enableNavBlocker=function(){d||(window.addEventListener("beforeunload",b),d=!0)};pts.disableNavBlocker=function(){d&&(window.removeEventListener("beforeunload",b),d=!1)};document.getElementById("navbar-burger--main").addEventListener("click",function(a){a.currentTarget.classList.toggle("is-active");
document.getElementById("navbar-menu--main").classList.toggle("is-active")});for(var c=document.getElementsByClassName("is-logout-button"),e=0;e<c.length;e+=1)c[e].addEventListener("click",g)})();
