"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(){var e=document.getElementById("bylawFilter--bylaw"),t=document.getElementById("bylawResults"),a=exports.bylaws;function n(e){e.preventDefault();var t,n=parseInt(e.currentTarget.getAttribute("data-index")),l=a[n],i=function(){cityssm.postJSON("/admin/doDeleteBylaw",{bylawNumber:l.bylawNumber},function(e){e.success&&(t(),a=e.bylaws,s())})},r=function(e){e.preventDefault(),cityssm.confirmModal("Delete By-Law",'Are you sure you want to remove by-law "'+l.bylawNumber+'" from the list of available options?',"Yes, Remove By-Law","danger",i)},d=function(e){e.preventDefault(),cityssm.postJSON("/admin/doUpdateBylaw",e.currentTarget,function(e){e.success&&(t(),a=e.bylaws,s())})};cityssm.openHtmlModal("bylaw-edit",{onshow:function(){document.getElementById("editBylaw--bylawNumber").value=l.bylawNumber,document.getElementById("editBylaw--bylawDescription").value=l.bylawDescription},onshown:function(e,a){t=a,e.getElementsByTagName("form")[0].addEventListener("submit",d),e.getElementsByClassName("is-delete-button")[0].addEventListener("click",r)}})}function s(){for(var s=0,l=e.value.trim().toLowerCase().split(" "),i=document.createElement("tbody"),r=0;r<a.length;r+=1){for(var d=a[r],o=!0,c=d.bylawNumber.toLowerCase(),m=d.bylawDescription.toLowerCase(),y=0;y<l.length;y+=1)if(-1===c.indexOf(l[y])&&-1===m.indexOf(l[y])){o=!1;break}if(o){s+=1;var u=document.createElement("tr");u.innerHTML='<td><a data-index="'+r+'" href="#">'+cityssm.escapeHTML(d.bylawNumber)+"</a></td><td>"+cityssm.escapeHTML(d.bylawDescription)+"</td>",u.getElementsByTagName("a")[0].addEventListener("click",n),i.appendChild(u)}}cityssm.clearElement(t),0!==s?(t.innerHTML='<table class="table is-striped is-hoverable is-fullwidth"><thead><tr><th>By-Law Number</th><th>Description</th></tr></thead></table>',t.getElementsByTagName("table")[0].appendChild(i)):t.innerHTML='<div class="message is-info"><div class="message-body">There are no by-laws that meet your search criteria.</div></div>'}delete exports.bylaws,e.addEventListener("keyup",s),s(),document.getElementById("is-add-bylaw-button").addEventListener("click",function(e){var t;e.preventDefault();var n=function(e){e.preventDefault(),cityssm.postJSON("/admin/doAddBylaw",e.currentTarget,function(e){e.success?(t(),e.message&&cityssm.alertModal("By-Law Added",e.message,"OK","warning"),a=e.bylaws,s()):cityssm.alertModal("By-Law Not Added",e.message,"OK","danger")})};cityssm.openHtmlModal("bylaw-add",{onshown:function(e,a){t=a,e.getElementsByTagName("form")[0].addEventListener("submit",n)}})})}();