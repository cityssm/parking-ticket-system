"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),document.querySelector("#mtoImport--importFile").addEventListener("change",e=>{const s=document.querySelector("#mtoImport--importFileName"),t=document.querySelector("#mtoImport--importFileMessage"),i=e.currentTarget;if(i.files.length>0){const e=i.files[0].name;s.textContent=e,/^\d+\.txt$/gim.test(e)?cityssm.clearElement(t):t.innerHTML='<div class="tag is-warning"><span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span><span>MTO file names are generally a number with a ".txt" extension.</span></div>'}}),document.querySelector("#form--mtoImport").addEventListener("submit",e=>{e.preventDefault();const s=e.currentTarget,t=document.querySelector("#step-item--upload");t.classList.add("is-completed"),t.classList.add("is-success"),t.classList.remove("is-active"),t.querySelector(".icon").innerHTML='<i class="fas fa-check" aria-hidden="true"></i>';const i=document.querySelector("#step-item--update");i.classList.add("is-active"),i.querySelector(".step-marker").innerHTML='<span class="icon"><i class="fas fa-cogs" aria-hidden="true"></i></span>',document.querySelector("#step--upload").classList.add("is-hidden"),document.querySelector("#step--update").classList.remove("is-hidden"),cityssm.postJSON("/plates-ontario/doMTOImportUpload",s,e=>{i.classList.add("is-completed"),i.classList.remove("is-active");const s=document.querySelector("#mtoImport--message");e.success?(i.classList.add("is-success"),i.querySelector(".icon").innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',s.classList.add("is-success"),s.innerHTML='<div class="message-body"><p><strong>The file was imported successfully.</strong></p></div>'):(i.classList.add("is-danger"),i.querySelector(".icon").innerHTML='<i class="fas fa-exclamation" aria-hidden="true"></i>',s.classList.add("is-danger"),s.innerHTML='<div class="message-body"><p><strong>An error occurred while importing the file.</strong></p><p>'+cityssm.escapeHTML(e.message)+"</p></div>"),document.querySelector("#step-item--results").classList.add("is-active"),document.querySelector("#step--update").classList.add("is-hidden"),document.querySelector("#step--results").classList.remove("is-hidden")})});