(function(){document.getElementById("mtoImport--importFile").addEventListener("change",function(a){var b=document.getElementById("mtoImport--importFileName"),c=document.getElementById("mtoImport--importFileMessage");0<a.currentTarget.files.length&&(a=a.currentTarget.files[0].name,b.innerText=a,/^\d+[.]txt$/igm.test(a)?pts.clearElement(c):c.innerHTML='<div class="tag is-warning"><span class="icon"><i class="fas fa-exclamation-triangle" aria-hidden="true"></i></span><span>MTO file names are generally a number with a ".txt" extension.</span></div>')});
document.getElementById("form--mtoImport").addEventListener("submit",function(a){a.preventDefault();a=a.currentTarget;var b=document.getElementById("step-item--upload");b.classList.add("is-completed");b.classList.add("is-success");b.classList.remove("is-active");b.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-check" aria-hidden="true"></i>';var c=document.getElementById("step-item--update");c.classList.add("is-active");c.getElementsByClassName("step-marker")[0].innerHTML='<span class="icon"><i class="fas fa-cogs" aria-hidden="true"></i></span>';
document.getElementById("step--upload").classList.add("is-hidden");document.getElementById("step--update").classList.remove("is-hidden");pts.postJSON("/plates/mto_doImportUpload",a,function(a){c.classList.add("is-completed");c.classList.remove("is-active");var b=document.getElementById("mtoImport--message");a.success?(c.classList.add("is-success"),c.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-check" aria-hidden="true"></i>',b.classList.add("is-success"),b.innerHTML='<div class="message-body"><p><strong>The file was imported successfully.</strong></p></div>'):
(c.classList.add("is-danger"),c.getElementsByClassName("icon")[0].innerHTML='<i class="fas fa-exclamation" aria-hidden="true"></i>',b.classList.add("is-danger"),b.innerHTML='<div class="message-body"><p><strong>An error occurred while importing the file.</strong></p><p>'+pts.escapeHTML(a.message)+"</p></div>");document.getElementById("step-item--results").classList.add("is-active");document.getElementById("step--update").classList.add("is-hidden");document.getElementById("step--results").classList.remove("is-hidden")})})})();
